<div class="mkb-account">

  <div class="mkb-view row-fluid" ng-show="account.user.nickName" ng-controller="AssetsCtrl">
    <div class="span4 mkb-table mkb-table-cards">
      <table class="table table-bordered table-striped">
        <thead>
        <tr>
          <th><strong>卡牌</strong></th>
          <th><strong>强化等级</strong></th>
        </tr>
        </thead>
        <tr ng-repeat="card in account.cards">
          <td>{{assets.cards[card.cardId].cardName || '未知卡牌' + card.cardId}}</td>
          <td>{{card.level}}</td>
        </tr>
      </table>
    </div>
    <div class="span4">
      <table class="table table-bordered table-striped">
        <tbody>
        <tr>
          <td><strong>昵称</strong></td>
          <td>{{account.user.nickName}}</td>
        </tr>
        <tr>
          <td><strong>等级</strong></td>
          <td>{{account.user.level}} <span class="badge">{{((account.user.exp - account.user.prevExp) / (account.user.nextExp - account.user.prevExp) * 100).toFixed(2)}}%</span></td>
        </tr>
        <tr>
          <td><strong>邀请码</strong></td>
          <td>{{account.user.inviteCode}}</td>
        </tr>
        <tr>
          <td><strong>行动点</strong></td>
          <td>{{account.user.energy}}/{{account.user.energyMax}}</td>
        </tr>
        <tr>
          <td><strong>金币</strong></td>
          <td>{{account.user.coins}}</td>
        </tr>
        <tr>
          <td><strong>晶钻</strong></td>
          <td>{{account.user.cash}}</td>
        </tr>
        <tr>
          <td><strong>魔幻券</strong></td>
          <td>{{account.user.ticket}}</td>
        </tr>
        <tr>
          <td><strong>竞技场</strong></td>
          <td>胜利：{{account.user.win}} 失败：{{account.user.lose}} <span ng-show="account.user.win + account.user.lose" class="badge">{{(account.user.win / (account.user.win + account.user.lose) * 100).toFixed(2)}}%</span></td>
          </td>
        </tr>
        </tbody>
      </table>
      <div class="alert alert-info">
        <strong>游戏设定</strong>
        <a ng-click="assets.refreshAssets(account.username)"><i class="icon-refresh"></i></a>

        <div class="row-fluid">
          <a class="btn btn-info span3">地图<span ng-show="assets.maps.length" class="label label-info">{{assets.maps.length}}</span></a>
          <a class="btn btn-info span3">技能<span ng-show="assets.skills.length" class="label label-info">{{assets.skills.length}}</span></a>
          <a href="#modal_assets_cards" role="button" data-toggle="modal" class="btn btn-info span3">卡牌<span ng-show="assets.cards.length" class="label label-info">{{assets.cards.length}}</span></a>
          <a class="btn btn-info span3">符文<span ng-show="assets.runes.length" class="label label-info">{{assets.runes.length}}</span></a>
        </div>
      </div>
    </div>
    <div class="span4 mkb-table mkb-table-friends">
      <table class="table table-bordered table-striped">
        <tbody>
        <thead>
        <tr class="info">
          <td><strong>昵称</strong></td>
          <td><strong>竞技场排名</strong></td>
        </tr>
        </thead>
        <tr ng-repeat="friend in account.friends">
          <td>{{friend.nickName}} <span class="badge">LV:{{friend.level}}</span> <span ng-show="friend.legionName" class="badge">{{friend.legionName}}</span></td>
          <td>{{friend.rank}} <span ng-show="friend.win + friend.lose" class="badge">{{(friend.win / (friend.win + friend.lose) * 100).toFixed(2)}}%</span></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div id="modal_assets_cards" class="modal hide fade" tabindex="-1" role="dialog">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
      <p>One fine body…</p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      <button class="btn btn-primary">Save changes</button>
    </div>
  </div>

  <div ng-hide="account.user.nickName" id="modal-login" class="modal show">
    <div class="modal-header">
      <h4>Login</h4>
    </div>
    <div class="modal-body">
      <form class="form-horizontal">
        <div class="control-group">
          <label class="control-label" for="account_username">Username</label>

          <div class="controls">
            <input type="text" ng-model="account.username" id="account_username" placeholder="Username">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="account_password">Password</label>

          <div class="controls">
            <input type="password" ng-model="account.password" id="account_password" placeholder="Maybe I know it...?">
          </div>
        </div>
        <div class="control-group">
          <div class="controls">
            <label class="checkbox">
              <input ng-model="account.remember" type="checkbox"> Remember me
            </label>
            <button type="submit" ng-click="account.login()" class="btn">Sign in</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>